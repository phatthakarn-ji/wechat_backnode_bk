/*MIT license https://github.com/cartant/firebase-key/blob/master/LICENSE*/
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).firebaseKey={})}(this,function(e){"use strict";var a="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";function r(e){for(var r=0,t=0;t<8;++t){var n=a.indexOf(e.charAt(t));if(-1===n)throw new Error("Unexpected character '"+e.charAt(t)+"'.");r=64*r+n}return r}function t(e,r){var t="";if("function"==typeof e.repeat)t=e.repeat(r);else if(0<r){for(;1<r;)1&r&&(t+=e),r>>=1,e+=e;t+=e}return t}var c=0;e.date=function(e){return new Date(r(e))},e.decode=function(e){return e.replace(/!([0-9a-f]{2})/gi,function(e,r){return String.fromCharCode(parseInt(r,16))})},e.decodeLexicographic=function(e){var r=0;if("_"<e.charAt(0))for(var t=1;t<e.length;t++)r*=a.length,r+=a.indexOf(e.charAt(t));else{for(t=1;t<e.length;t++)r*=a.length,r+=a.length-1-a.indexOf(e.charAt(t));r=-r}return r},e.decrement=function(e){return e.replace(/[^-]-*$/,function(e){var r=a.indexOf(e.charAt(0));if(-1===r)throw new Error("Unexpected character '"+e.charAt(0)+"'.");return a.charAt(r-1)+t("z",e.length-1)})},e.encode=function(e){return e.replace(/[\/\.\$\[\]#!]/g,function(e){return"!"+e.charCodeAt(0).toString(16).toUpperCase()})},e.encodeLexicographic=function(e){var r="";if(0===e)r="a-";else if(0<e){for(;0<e;){var t=e%a.length;r=a.charAt(t)+r,e-=t,e/=a.length}r=a.charAt(r.length+37)+r}else{for(e=-e;0<e;)t=e%a.length,r=a.charAt(a.length-1-t)+r,e-=t,e/=a.length;r=a.charAt(37-r.length)+r}return r},e.increment=function(e){return e.replace(/[^z]z*$/,function(e){var r=a.indexOf(e.charAt(0));if(-1===r)throw new Error("Unexpected character '"+e.charAt(0)+"'.");return a.charAt(r+1)+t("-",e.length-1)})},e.key=function(e,r){void 0===e&&((e=Date.now())<=c&&(e=c+1),c=e),e instanceof Date&&(e=e.getTime());for(var t=new Array(9),n=7;0<=n;--n)t[n]=a.charAt(e%64),e=Math.floor(e/64);if(0!==e)throw new Error("Unexpected timestamp.");switch(r){case"max":t[8]="zzzzzzzzzzzz";break;case"min":t[8]="------------";break;default:t[8]=function(e,r){var t=[];for(r|=0;r;){var n=Math.random()*e.length|0;t.push(e.charAt(n)),r-=1}return t.join("")}(a,12)}return t.join("")},e.milliseconds=r,e.resetLastTimestamp=function(){c=0},Object.defineProperty(e,"__esModule",{value:!0})});